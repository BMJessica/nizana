---
import Footer from "@components/Footer.astro";
import Nav from "@components/Nav.astro";

interface Props {
	title: string;
}
const { title } = Astro.props;
const links = [
	{ label: "INICIO", href: "#home" },
	{ label: "SERVICIOS", href: "#services" },
	{ label: "CÃ“MO TRABAJAMOS", href: "#our-process" },
	{ label: "NOSOTROS", href: "#about" },
];
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/src/assets/nizana.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body>
		<Nav links={links} />
		<main>
			<slot />
		</main>
		<Footer links={links} />
	</body>
</html>
<script lang="ts">
	const scrooll_behavior = (objective_Y, duration = 2000) => {
		const block = (e) => e.preventDefault();
		window.addEventListener("wheel", block, { passive: false });
		window.addEventListener("touchmove", block, { passive: false });
		const Y = window.scrollY;
		const difference = objective_Y - Y;
		let start;
		const step = (estimated_time) => {
			if (!start) start = estimated_time;
			const time = estimated_time - start;
			const percent = Math.min(time / duration, 1);

			window.scrollTo(0, Y + difference * percent);

			if (time < duration) {
				requestAnimationFrame(step);
			} else {
				window.removeEventListener("wheel", block);
				window.removeEventListener("touchmove", block);
			}
		};

		requestAnimationFrame(step);
	};

	document.querySelectorAll("a[href^='#']").forEach((enlaces) => {
		enlaces.addEventListener("click", function (e) {
			e.preventDefault();
			const target = document.querySelector(this.getAttribute("href"));
			if (target) {
				scrooll_behavior(target.offsetTop - 60, 2000);
			}
		});
	});
	document.addEventListener("DOMContentLoaded", () => {
		const toggle = document.getElementById("icon-menu");
		const menuLinks = document.querySelectorAll("#menu-open a");

		menuLinks.forEach((link) => {
			link.addEventListener("click", () => {
				if (toggle) toggle.checked = false;
			});
		});
	});
</script>

<style is:global>
	html,
	body {
		font-family: "Montserrat Variable", sans-serif;
		font-weight: 400;
		scroll-padding-top: 60px;
		padding: 0;
		margin: 0;
		width: 100%;
		height: 100%;
	}
	main {
		place-items: center;
	}
</style>
